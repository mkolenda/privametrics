$(document).ready(function(){$("#start_date").datepicker(),$("#end_date").datepicker(),$("#start_date").datepicker("setDate","-30"),$("#end_date").datepicker("setDate","0");var e=function(e){$("#chart").remove(),$("#chart-container").append("<div id=chart>"),new Morris.Line({element:"chart",data:e,xkey:"created_at",ykeys:["property_1","property_2"],labels:["property 1","property 2"],xLabelFormat:function(e){var t=e.getDate(),a=e.getMonth()+1,r=e.getFullYear();return a+"-"+t+"-"+r},xLabelAngle:45})},t=function(e){$("#gridTable").remove(),$("#grid").append("<table class='table table-striped' id='gridTable'>"),$("#gridTable").append("<tr><th>Date</th><th>Property 1</th><th>Property 2</th></tr>");for(var t in e)$("#gridTable").append("<tr><td>"+e[t].created_at+"</td>"+"<td>"+e[t].property_1+"</td>"+"<td>"+e[t].property_2+"</td>"+"</tr>")},a=function(){var a=$("#start_date").val(),r=$("#end_date").val(),n=$("#event_names").val(),d=$("#domain_names").val(),o=[],p=$("#chart-data").data("events");for(i=0;i<p.length;i++)p[i].event_name===n&&p[i].domain_name===d&&dates.inRange(dates.convert(p[i].created_at),dates.convert(a),dates.convert(r))&&o.push({created_at:p[i].created_at,property_1:p[i].property_1,property_2:p[i].property_2});e(o),t(o)};$("#start_date").on("change",function(){a()}),$("#end_date").on("change",function(){a()}),$("#event_names").on("change",function(){a()}),$("#domain_names").on("change",function(){a()}),a()});