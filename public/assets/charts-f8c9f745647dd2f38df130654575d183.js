$(document).ready(function(){var e=[];for(var t in $("#chart").data("events"))0===t%7&&e.push($("#chart").data("events")[t].created_at);$("#start_date").datepicker(),$("#end_date").datepicker();var a=new Morris.Line({element:"chart",data:$("#chart").data("events"),xkey:"created_at",ykeys:["property_1","property_2"],labels:["property 1","property 2"],xLabelFormat:function(e){var t=e.getDate(),a=e.getMonth()+1,r=e.getFullYear();return a+"-"+t+"-"+r},xLabelAngle:45,events:e,eventStrokeWidth:1}),r=function(e){a.setData(e)},n=function(e){$("#gridTable").remove(),$("#grid").append("<table class='table table-striped' id='gridTable'>"),$("#gridTable").append("<tr><th>Date</th><th>Property 1</th><th>Property 2</th></tr>");for(var t in e)$("#gridTable").append("<tr><td>"+e[t].created_at+"</td>"+"<td>"+e[t].property_1+"</td>"+"<td>"+e[t].property_2+"</td>"+"</tr>")},d=function(){var e=$("#start_date").val(),t=$("#end_date").val(),a=$("#event_names").val(),d=$("#domain_names").val(),o=[],p=$("#chart-data").data("events");for(i=0;i<p.length;i++)p[i].event_name===a&&p[i].domain_name===d&&dates.inRange(dates.convert(p[i].created_at),dates.convert(e),dates.convert(t))&&o.push({created_at:p[i].created_at,property_1:p[i].property_1,property_2:p[i].property_2});r(o),n(o),$(".alert").remove()};$("#start_date").on("change",function(){d()}),$("#end_date").on("change",function(){d()}),$("#event_names").on("change",function(){d()}),$("#domain_names").on("change",function(){d()})});